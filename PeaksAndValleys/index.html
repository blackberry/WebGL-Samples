<!DOCTYPE html>

<!--
- Copyright (c) 2012 Research In Motion Limited.
-
- Licensed under the Apache License, Version 2.0 (the "License");
- you may not use this file except in compliance with the License.
- You may obtain a copy of the License at
-
- http://www.apache.org/licenses/LICENSE-2.0
-
- Unless required by applicable law or agreed to in writing, software
- distributed under the License is distributed on an "AS IS" BASIS,
- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- See the License for the specific language governing permissions and
- limitations under the License.
-->

<html>
	<head>
		<script type="text/javascript">
			/*global window, document */

			(function () {
				'use strict';
				var meta;

				meta = document.createElement("meta");
				meta.setAttribute('name', 'viewport');
				meta.setAttribute('content', 'initial-scale=' + (1.0 / window.devicePixelRatio) + ',user-scalable=no');
				document.getElementsByTagName('head')[0].appendChild(meta);
			}());
		</script>
		<link type="text/css" rel="stylesheet" href="css/styles.css">
	</head>
	<body>
		<div id="container">
			<div id="easle">
				<canvas id="glCanvas" width="1024" height="512"></canvas>
			</div>
			<div id="license">
				<p>This sample's primary intent is to provide a number of WebGL concepts working in one place. This is not intended to be a market-ready application for end consumers. While it can be fun to run around the countryside, this is primarily a WebGL learning resource. Some key concepts include:</p>
				<ul>
					<li>Rendering objects in solid colours.</li>
					<li>Rendering objects with textures applied.</li>
					<li>Blending texures and colours on a single object.</li>
					<li>Ambient and directional lighting.</li>
					<li>Skybox generation.</li>
					<li>Terrain generation.</li>
					<li>Touch controls.</li>
				</ul>
				<p>For full licensing information, please visit the <a href="#" uri="https://github.com/blackberry/WebGL-Samples/tree/master/PeaksAndValleys">BlackBerry/WebGL-Samples</a> Github repository.</p>
				<p>Immense thank you to the following people. They might not know how much they helped, but I appreciate it none the less.</p>
				<p>
					<a href="#" uri="http://www.learningwebgl.com">Learning WebGL</a>
					&nbsp;|&nbsp;
					<a href="#" uri="https://github.com/toji/gl-matrix">Brandon Jones (toji)</a>
					&nbsp;|&nbsp;
					<a href="#" uri="https://github.com/jeromeetienne/virtualjoystick.js">Jerome Etienne (jetienne)</a>
					&nbsp;|&nbsp;
					<a href="#" uri="http://chandler.prallfamily.com/2011/06/blending-webgl-textures">Chandler Prall</a>
					&nbsp;|&nbsp;
					<a href="#" uri="http://webreflection.blogspot.ca/2010/09/fragment-and-vertex-shaders-my-way-to.html">Andrea Giammarch</a>
					&nbsp;|&nbsp;
					<a href="#" uri="http://paulirish.com/2011/requestanimationframe-for-smart-animating">Paul Irish and Erik Moller</a>
					&nbsp;|&nbsp;
					<a href="#" uri="https://github.com/mrdoob/three.js">Ricardo Cabello (mrdoob)</a>
					&nbsp;|&nbsp;
					<a href="#" uri="https://developer.valvesoftware.com/wiki/Skybox_(2D)_with_Terragen">The Valve Developer Community</a>
				</p>
			</div>
			<div id="footer">
				<div id="audioOn" class="active"></div>
				<div id="audioOff"></div>
				<div id="licenseShow" class="active"></div>
				<div id="licenseHide"></div>
			</div>
		</div>

		<script type="text/javascript" src="js/glMatrix-0.9.5.min.js"></script>
		<script type="text/javascript" src="js/Utils.js"></script>
		<script type="text/javascript" src="js/GLSkybox.js"></script>
		<script type="text/javascript" src="js/GLTerrain.js"></script>
		<script type="text/javascript" src="js/GLCube.js"></script>
		<script type="text/javascript" src="js/virtualjoystick.js"></script>
		<script type="text/javascript" src="js/Game.js"></script>
		<script type="text/javascript">
			/*global window, document, console, Game, blackberry */

			var game = null;
			function invokeBrowser(e) {
				"use strict";
				var args, uri;

				if (typeof blackberry === 'undefined') {
					console.log('blackberry does not exist.');
				} else {
					if (typeof blackberry.invoke === 'undefined') {
						console.log('blackberry.invoke does not exist.');
					} else {
						uri = e.target.getAttribute('uri');
						if (typeof blackberry.invoke.BrowserArguments === 'undefined') {
							/* BB10 */
							blackberry.invoke.invoke({ uri: uri }, function () {}, function () {});
						} else {
							/* PlayBook */
							args = new blackberry.invoke.BrowserArguments(uri);
							blackberry.invoke.invoke(blackberry.invoke.APP_BROWSER, args);
						}
					}
				}
				return false;
			}

			function toggleAudio() {
				"use strict";
				if (document.querySelector('#audioOn').className === 'active') {
					/* Turn off audio. */
					document.querySelector('#audioOn').className = '';
					document.querySelector('#audioOn').style.opacity = '0.0';
					document.querySelector('#audioOff').style.opacity = '1.0';
				} else {
					/* Turn on audio. */
					document.querySelector('#audioOn').className = 'active';
					document.querySelector('#audioOn').style.opacity = '1.0';
					document.querySelector('#audioOff').style.opacity = '0.0';
				}
			}

			function toggleLicense() {
				"use strict";
				if (document.querySelector('#licenseShow').className === 'active') {
					/* Show license. */
					document.querySelector('#licenseShow').className = '';
					document.querySelector('#license').className = 'open';
					document.querySelector('#licenseShow').style.opacity = '0.0';
					document.querySelector('#licenseHide').style.opacity = '1.0';
				} else {
					/* Hide license. */
					document.querySelector('#licenseShow').className = 'active';
					document.querySelector('#license').className = '';
					document.querySelector('#licenseShow').style.opacity = '1.0';
					document.querySelector('#licenseHide').style.opacity = '0.0';
				}
			}

			function ready() {
				"use strict";
				var elements, n;

				try {
					document.querySelector('#licenseShow').addEventListener('click', toggleLicense, false);
					document.querySelector('#licenseHide').addEventListener('click', toggleLicense, false);
					document.querySelector('#audioOn').addEventListener('click', toggleAudio, false);
					document.querySelector('#audioOff').addEventListener('click', toggleAudio, false);

					elements = document.querySelectorAll('a');
					for (n = 0; n < elements.length; n = n + 1) {
						elements[n].addEventListener('click', invokeBrowser, false);
					}

					game = new Game();
				} catch (err) {
					console.log("ready: " + err);
				}
				window.removeEventListener("DOMContentLoaded", ready, false);
			}

			/**
			 * Source: http://www.aerotwist.com/tutorials/ten-things-i-learned
			 */
			document.onselectstart = function () {
				"use strict";
				return false;
			};

			window.addEventListener("DOMContentLoaded", ready, false);
		</script>
	</body>
</html>